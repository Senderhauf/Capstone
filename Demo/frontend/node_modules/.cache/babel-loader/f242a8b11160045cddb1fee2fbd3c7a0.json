{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _underscore = require(\"underscore\");\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _moment = require(\"moment\");\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d3TimeFormat = require(\"d3-time-format\");\n\nrequire(\"moment-duration-format\");\n\nvar _ValueList = require(\"./ValueList\");\n\nvar _ValueList2 = _interopRequireDefault(_ValueList);\n\nvar _Label = require(\"./Label\");\n\nvar _Label2 = _interopRequireDefault(_Label);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n *  Copyright (c) 2015-present, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\n\nvar TimeMarker = function (_React$Component) {\n  _inherits(TimeMarker, _React$Component);\n\n  function TimeMarker() {\n    _classCallCheck(this, TimeMarker);\n\n    return _possibleConstructorReturn(this, (TimeMarker.__proto__ || Object.getPrototypeOf(TimeMarker)).apply(this, arguments));\n  }\n\n  _createClass(TimeMarker, [{\n    key: \"renderLine\",\n    value: function renderLine(posx) {\n      return _react2.default.createElement(\"line\", {\n        style: this.props.infoStyle.line,\n        x1: posx,\n        y1: 0,\n        x2: posx,\n        y2: this.props.height\n      });\n    }\n  }, {\n    key: \"renderTimeMarker\",\n    value: function renderTimeMarker(d) {\n      var textStyle = {\n        fontSize: 11,\n        textAnchor: \"left\",\n        fill: \"#bdbdbd\"\n      };\n      var dateStr = \"\" + d;\n\n      if (this.props.timeFormat === \"day\") {\n        var formatter = (0, _d3TimeFormat.timeFormat)(\"%d\");\n        dateStr = formatter(d);\n      } else if (this.props.timeFormat === \"month\") {\n        var _formatter = (0, _d3TimeFormat.timeFormat)(\"%B\");\n\n        dateStr = _formatter(d);\n      } else if (this.props.timeFormat === \"year\") {\n        var _formatter2 = (0, _d3TimeFormat.timeFormat)(\"%Y\");\n\n        dateStr = _formatter2(d);\n      } else if (this.props.timeFormat === \"relative\") {\n        dateStr = _moment2.default.duration(+d).format();\n      } else if (_underscore2.default.isString(this.props.timeFormat)) {\n        var _formatter3 = (0, _d3TimeFormat.timeFormat)(this.props.timeFormat);\n\n        dateStr = _formatter3(d);\n      } else if (_underscore2.default.isFunction(this.props.timeFormat)) {\n        dateStr = this.props.timeFormat(d);\n      }\n\n      return _react2.default.createElement(\"text\", {\n        x: 0,\n        y: 0,\n        dy: \"1.2em\",\n        style: textStyle\n      }, dateStr);\n    }\n  }, {\n    key: \"renderInfoBox\",\n    value: function renderInfoBox(posx) {\n      var w = this.props.infoWidth;\n      var infoBoxProps = {\n        align: \"left\",\n        style: this.props.infoStyle.box,\n        width: this.props.infoWidth,\n        height: this.props.infoHeight\n      };\n\n      if (this.props.infoValues) {\n        var infoBox = _underscore2.default.isString(this.props.infoValues) ? _react2.default.createElement(_Label2.default, _extends({}, infoBoxProps, {\n          label: this.props.infoValues\n        })) : _react2.default.createElement(_ValueList2.default, _extends({}, infoBoxProps, {\n          values: this.props.infoValues\n        }));\n\n        if (posx + 10 + w < this.props.width - 50) {\n          return _react2.default.createElement(\"g\", {\n            transform: \"translate(\" + (posx + 10) + \",\" + 5 + \")\"\n          }, this.props.showTime ? this.renderTimeMarker(this.props.time) : null, _react2.default.createElement(\"g\", {\n            transform: \"translate(0,\" + (this.props.showTime ? 20 : 0) + \")\"\n          }, infoBox));\n        }\n\n        return _react2.default.createElement(\"g\", {\n          transform: \"translate(\" + (posx - w - 10) + \",\" + 5 + \")\"\n        }, this.props.showTime ? this.renderTimeMarker(this.props.time) : null, _react2.default.createElement(\"g\", {\n          transform: \"translate(0,\" + (this.props.showTime ? 20 : 0) + \")\"\n        }, infoBox));\n      }\n\n      return _react2.default.createElement(\"g\", null);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var posx = this.props.timeScale(this.props.time);\n\n      if (posx) {\n        return _react2.default.createElement(\"g\", null, this.props.showLine ? this.renderLine(posx) : null, this.props.showInfoBox ? this.renderInfoBox(posx) : null);\n      }\n\n      return null;\n    }\n  }]);\n\n  return TimeMarker;\n}(_react2.default.Component);\n\nexports.default = TimeMarker;\nTimeMarker.propTypes = {\n  /**\n   * Show or hide this chart\n   */\n  visible: _propTypes2.default.bool,\n\n  /**\n   * The time, expressed as a Javascript `Date` object, to display the marker\n   */\n  time: _propTypes2.default.instanceOf(Date),\n\n  /**\n   * The values to show in the info box. This is either an array of\n   * objects, with each object specifying the label and value\n   * to be shown in the info box, or a simple string label\n   */\n  infoValues: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    label: _propTypes2.default.string,\n    // eslint-disable-line\n    value: _propTypes2.default.string // eslint-disable-line\n\n  }))]),\n\n  /**\n   * The style of the info box and connecting lines. This is an\n   * object of the form { line, box, dot }. Line, box and dot\n   * are themselves objects representing inline CSS for each of\n   * the pieces of the info marker.\n   */\n  infoStyle: _propTypes2.default.shape({\n    line: _propTypes2.default.object,\n    // eslint-disable-line\n    box: _propTypes2.default.object,\n    // eslint-disable-line\n    dot: _propTypes2.default.object // eslint-disable-line\n\n  }),\n\n  /**\n   * The width of the hover info box\n   */\n  infoWidth: _propTypes2.default.number,\n\n  /**\n   * The height of the hover info box\n   */\n  infoHeight: _propTypes2.default.number,\n\n  /**\n   * Display the info box at all. If you don't have any values to show and just\n   * want a line and a time (for example), you can set this to false.\n   */\n  showInfoBox: _propTypes2.default.bool,\n\n  /**\n   * You can show the info box without the corresponding time marker. Why would\n   * you do this? I don't know. Actually, I do. You might use the ChartContainer\n   * tracker mechanism to show the line across multiple rows, then add a TimeMarker\n   * selectively to each row.\n   */\n  showLine: _propTypes2.default.bool,\n\n  /**\n   * You can hide the time displayed above the info box. You might do this because\n   * it is already displayed elsewhere in your UI. Or maybe you just don't like it.\n   */\n  showTime: _propTypes2.default.bool,\n\n  /**\n   * The time format used for display of the time above the info box.\n   */\n  timeFormat: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.func]),\n\n  /**\n   * [Internal] The timeScale supplied by the surrounding ChartContainer\n   */\n  timeScale: _propTypes2.default.func,\n\n  /**\n   * [Internal] The width supplied by the surrounding ChartContainer\n   */\n  width: _propTypes2.default.number,\n\n  /**\n   * [Internal] The height supplied by the surrounding ChartContainer\n   */\n  height: _propTypes2.default.number\n};\nTimeMarker.defaultProps = {\n  visible: true,\n  showInfoBox: true,\n  showLine: true,\n  showTime: true,\n  infoStyle: {\n    line: {\n      stroke: \"#999\",\n      cursor: \"crosshair\",\n      pointerEvents: \"none\"\n    },\n    box: {\n      fill: \"white\",\n      opacity: 0.9,\n      stroke: \"#999\",\n      pointerEvents: \"none\"\n    },\n    dot: {\n      fill: \"#999\"\n    }\n  },\n  infoWidth: 90,\n  infoHeight: 25\n};","map":null,"metadata":{},"sourceType":"script"}