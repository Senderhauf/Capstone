{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _underscore = require(\"underscore\");\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nvar _immutable = require(\"immutable\");\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _event = require(\"./event\");\n\nvar _event2 = _interopRequireDefault(_event);\n\nvar _util = require(\"./base/util\");\n\nvar _util2 = _interopRequireDefault(_util);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * The creation of an TimeEvent is done by combining two parts:\n *  * the timestamp\n *  * the data\n *\n * To specify the data you can supply:\n\n *  * a Javascript object of key/values. The object may contained nested data.\n *  * an Immutable.Map\n *  * a simple type such as an integer. This is a shorthand for supplying {\"value\": v}.\n *\n * Example:\n *\n * ```\n * const t = new Date(\"2015-04-22T03:30:00Z\");\n * const event1 = new TimeEvent(t, { a: 5, b: 6 });\n * ```\n */\n\n/*\n *  Copyright (c) 2015, The Regents of the University of California,\n *  through Lawrence Berkeley National Laboratory (subject to receipt\n *  of any required approvals from the U.S. Dept. of Energy).\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\n\nvar TimeEvent = function (_Event) {\n  (0, _inherits3.default)(TimeEvent, _Event);\n  /**\n   * The creation of an TimeEvent is done by combining two parts:\n   * the timestamp and the data.\n   *\n   * To construct you specify the timestamp as either:\n   *     - Javascript Date object\n   *     - a Moment, or\n   *     - millisecond timestamp: the number of ms since the UNIX epoch\n   *\n   * To specify the data you can supply either:\n   *     - a Javascript object containing key values pairs\n   *     - an Immutable.Map, or\n   *     - a simple type such as an integer. In the case of the simple type\n   *       this is a shorthand for supplying {\"value\": v}.\n   */\n\n  function TimeEvent(arg1, arg2) {\n    (0, _classCallCheck3.default)(this, TimeEvent);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TimeEvent.__proto__ || (0, _getPrototypeOf2.default)(TimeEvent)).call(this));\n\n    if (arg1 instanceof TimeEvent) {\n      var other = arg1;\n      _this._d = other._d;\n      return (0, _possibleConstructorReturn3.default)(_this);\n    } else if (arg1 instanceof _immutable2.default.Map && arg1.has(\"time\") && arg1.has(\"data\")) {\n      _this._d = arg1;\n      return (0, _possibleConstructorReturn3.default)(_this);\n    }\n\n    var time = _util2.default.timestampFromArg(arg1);\n\n    var data = _util2.default.dataFromArg(arg2);\n\n    _this._d = new _immutable2.default.Map({\n      time: time,\n      data: data\n    });\n    return _this;\n  }\n  /**\n   * Returns the timestamp (as ms since the epoch)\n   */\n\n\n  (0, _createClass3.default)(TimeEvent, [{\n    key: \"key\",\n    value: function key() {\n      return this.timestamp().getTime();\n    }\n    /**\n     * Returns the Event as a JSON object, essentially:\n     *  {time: t, data: {key: value, ...}}\n     * @return {Object} The event as JSON.\n     */\n\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        time: this.timestamp().getTime(),\n        data: this.data().toJSON()\n      };\n    }\n    /**\n     * Returns a flat array starting with the timestamp, followed by the values.\n     */\n\n  }, {\n    key: \"toPoint\",\n    value: function toPoint(columns) {\n      var _this2 = this;\n\n      var values = [];\n      columns.forEach(function (c) {\n        var v = _this2.data().get(c);\n\n        values.push(v === \"undefined\" ? null : v);\n      });\n      return [this.timestamp().getTime()].concat(values);\n    }\n    /**\n     * The timestamp of this data, in UTC time, as a string.\n     */\n\n  }, {\n    key: \"timestampAsUTCString\",\n    value: function timestampAsUTCString() {\n      return this.timestamp().toUTCString();\n    }\n    /**\n     * The timestamp of this data, in Local time, as a string.\n     */\n\n  }, {\n    key: \"timestampAsLocalString\",\n    value: function timestampAsLocalString() {\n      return this.timestamp().toString();\n    }\n    /**\n     * The timestamp of this data\n     */\n\n  }, {\n    key: \"timestamp\",\n    value: function timestamp() {\n      return this._d.get(\"time\");\n    }\n    /**\n     * The begin time of this Event, which will be just the timestamp\n     */\n\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      return this.timestamp();\n    }\n    /**\n     * The end time of this Event, which will be just the timestamp\n     */\n\n  }, {\n    key: \"end\",\n    value: function end() {\n      return this.timestamp();\n    }\n    /**\n     * Turn the Collection data into a string\n     * @return {string} The collection as a string\n     */\n\n  }, {\n    key: \"stringify\",\n    value: function stringify() {\n      return (0, _stringify2.default)(this.data());\n    }\n  }]);\n  return TimeEvent;\n}(_event2.default);\n\nexports.default = TimeEvent;","map":null,"metadata":{},"sourceType":"script"}